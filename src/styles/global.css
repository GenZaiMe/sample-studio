/**
 * ファイル: /src/styles/global.css
 * 役割: サイト共通の見た目（背景・ブロック・リンク・Markdown装飾）
 *
 * 設計方針:
 * - 装飾する場所は dark / light で共通（切り分けない）
 * - 変えるのは「強さ（コントラスト）」だけ
 * - アクセントは「枠・見出し・Markdown装飾」に限定（文字色には使わない）
 */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---------- 変数: dark基準 ---------- */
:root {
  /* 文字基準の表示倍率（ZoomSliderで変更） */
  --ui-scale: 1;

  /* 表示倍率（ZoomSliderで変更） */
/* アクセント（デフォルトは stone） */
  --accent: #ff4d00;

  /* 文字色（darkは白基調） */
  --fg: rgba(255,255,255,0.94);
  --muted: rgba(255,255,255,0.72);
  --muted2: rgba(255,255,255,0.58);

  /* 線とパネル（dark用） */
  --line: rgba(255,255,255,0.10);
  --line-strong: rgba(255,255,255,0.16);
  --panel: rgba(20,20,20,0.70);

  color-scheme: dark;
}

/* ---------- 変数: light用（強さだけ上げる） ---------- */
html[data-theme="light"] {
  /* 文字色（lightは黒基調） */
  --fg: rgba(0,0,0,0.92);
  --muted: rgba(0,0,0,0.68);
  --muted2: rgba(0,0,0,0.54);

  /* lightは線を少し強める（ここが「甘さ」の改善ポイント） */
  --line: rgba(0,0,0,0.16);
  --line-strong: rgba(0,0,0,0.22);
  --panel: rgba(255,255,255,0.92);

  color-scheme: light;
}

/* ---------- アクセント切替（thema code） ---------- */
html[data-accent="mr"] { --accent:#ff3333; }
html[data-accent="gg"] { --accent:#00ff41; }
html[data-accent="pb"] { --accent:#00ccff; }
html[data-accent="ps"] { --accent:#444444; }
html[data-accent="pg"] { --accent:#37474F; }
html[data-accent="dy"] { --accent:#eeff00; }
html[data-accent="so"] { --accent:#ff4d00; }

/* ---------- View（list / page） ----------
   使い分けの入口だけ用意しています。
   - html[data-view="list"]: 一覧向け
   - html[data-view="page"]: 詳細向け
   今は見た目を変えていませんが、後でここに差分CSSを足せます。
*/

@layer base {
  html { font-size: calc(16px * var(--ui-scale)); }

body {
    @apply min-h-screen;
    background: #0a0a0a;
    color: var(--fg);
  }
  html[data-theme="light"] body {
    background: #fafafa;
    color: var(--fg);
  }
}

@layer components {
  /* ---------- 背景グリッド（世界観） ---------- */
  .pz-bg {
    background-image:
      radial-gradient(circle at 1px 1px, rgba(255,255,255,.10) 1px, transparent 0),
      linear-gradient(to right, rgba(255,255,255,.05) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255,255,255,.05) 1px, transparent 1px);
    background-size: 18px 18px, 72px 72px, 72px 72px;
  }
  html[data-theme="light"] .pz-bg {
    background-image:
      radial-gradient(circle at 1px 1px, rgba(0,0,0,.10) 1px, transparent 0),
      linear-gradient(to right, rgba(0,0,0,.06) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(0,0,0,.06) 1px, transparent 1px);
  }

  .pz-accent{
    accent-color: var(--accent);
  }
  /* ---------- ブロック（パネル） ---------- */
  .pz-block {
    @apply rounded-md border backdrop-blur px-4 py-4;
    border-color: var(--line);
    background: var(--panel);
  }

  /* ---------- アクセントは「枠・見出し」だけ ---------- */
  .pz-accent-l {
    border-left-width: 4px;
    border-left-color: var(--accent);
  }

  /* 見出しの下線（通常） */
  .pz-title {
    @apply text-sm font-semibold;
    border-bottom: 1px solid var(--line);
    padding-bottom: 8px;
  }

  /* 見出しの下線（アクセント付き: 少し太く） */
  .pz-title-accent {
    border-bottom-color: var(--accent);
    border-bottom-width: 2px;
  }

  /* ---------- 文字トーン ---------- */
  .pz-muted { color: var(--muted); }
  .pz-muted2 { color: var(--muted2); }

  /* ---------- リンク ----------
     - 文字色はテーマ（白/黒）に合わせる
     - アクセントは「下線色」にだけ使う */
  .pz-link {
    color: inherit;
    text-decoration: underline;
    text-decoration-color: var(--accent);
    text-underline-offset: 3px;
  }
  .pz-link:hover { opacity: 0.92; }

  /* ---------- カードカテゴリ ---------- */
  .cp-card { @apply pz-block pz-accent-l; }
  .bg-card { @apply pz-block; }
  .db-card { @apply pz-block font-mono text-sm; }

  /* ---------- Markdown想定（Content Collectionsの本文） ---------- */
  .pz-md h1, .pz-md h2, .pz-md h3 {
    border-left: 4px solid var(--accent);
    padding-left: 10px;
    margin-top: 1.25rem;
    margin-bottom: 0.5rem;
    font-weight: 700;
  }

  .pz-md p { margin: 0.75rem 0; }

  .pz-md a {
    color: inherit;
    text-decoration: underline;
    text-decoration-color: var(--accent);
    text-underline-offset: 3px;
  }

  .pz-md code {
    padding: 0.1rem 0.35rem;
    border-radius: 0.35rem;
    border: 1px solid var(--line);
    background: rgba(255,255,255,0.06);
  }
  html[data-theme="light"] .pz-md code {
    background: rgba(0,0,0,0.05);
  }

  .pz-md pre {
    margin: 0.75rem 0;
    padding: 0.9rem;
    border-radius: 0.6rem;
    border: 1px solid var(--line);
    background: rgba(0,0,0,0.35);
    overflow: auto;
  }
  html[data-theme="light"] .pz-md pre {
    background: rgba(0,0,0,0.05);
  }

  .pz-md blockquote {
    margin: 0.75rem 0;
    border-left: 4px solid var(--accent);
    padding-left: 12px;
    color: var(--muted);
  }

/* ---------- Markdown: 箇条書き装飾 ---------- */

/* ul / ol 共通の余白 */
.pz-md ul,
.pz-md ol {
  margin: 0.75rem 0 0.75rem 1.25rem;
  padding: 0;
}

/* li の行間と余白 */
.pz-md li{
  margin: 0.4rem 0;
  line-height: 1.7;
}
.pz-block li{
  margin: 0.4rem 0;
  line-height: 1.4;
}

/* 通常の黒丸を消してカスタム表示 */
.pz-md ul {
  list-style: none;
}

.pz-md ul > li {
  position: relative;
  padding-left: 1.1rem;
}

/* アクセント色の小ドット */
.pz-md ul > li::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0.75em;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--accent);
  transform: translateY(-50%);
}

/* ネストしたリストは少し控えめに */
.pz-md ul ul > li::before {
  width: 5px;
  height: 5px;
  opacity: 0.7;
}

/* 番号付きリストはデフォルトを活かしつつアクセント */
.pz-md ol {
  list-style: decimal;
}

.pz-md ol > li::marker {
  color: var(--accent);
  font-weight: 600;
}

/* 箇条書き内の code */
.pz-md li code {
  background: rgba(255,255,255,0.08);
}
html[data-theme="light"] .pz-md li code {
  background: rgba(0,0,0,0.06);
}


  /* ---------- フッター（ブロック外・センター表示） ---------- */
  .pz-footer {
    text-align: center;
    padding: 18px 0 8px 0;
    color: var(--muted);
  }
  .pz-footer a { color: var(--fg); }
  .pz-footer a:hover { opacity: 0.92; }

  /* ==========================================
     中央カラムの幅制御（本文とフッターを分離）
     - 本文: list/page で幅を変える
     - フッター: 常に一定幅で「画面中央基準」
     ========================================== */

  /* 本文の器（viewで幅が変わる） */
  .pz-main-content {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* list: 狭め（例） */
  html[data-view="list"] .pz-main-content {
    max-width: 48rem;
  }

  /* page: 広め（例） */
  html[data-view="page"] .pz-main-content {
    max-width: 64rem;
  }

  /* フッターの器（常に固定幅＝画面中央の基準） */
  .pz-main-footer {
    width: 100%;
    max-width: 48rem; /* ← listの基準幅に固定するのがコツ */
    margin-left: auto;
    margin-right: auto;

    /* 縦の「短い時は下に吸着」感（任意調整） */
    padding-top: clamp(0.5rem, 4vh, 3rem);
  }

}


/* ---------- トップメニュー（PC用） ---------- */
.pz-topbar {
  border-bottom: 1px solid var(--line);
  background: var(--panel);
  backdrop-filter: blur(6px);
}
